(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-534488b6","chunk-e2c094ae","chunk-c8c46edc","chunk-2d0cb71f","chunk-2d2266ce","chunk-2d21b2be"],{"27c9":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("shead",{attrs:{headid:t.$route.query.headid}}),e("div",{staticClass:"wrap round-block"},[e("div",{staticClass:"line-title"},[t._v(" 当前位置："),e("router-link",{attrs:{to:"/e/index"}},[t._v("首页")]),t._v(" >> 商品信息>>"+t._s(t.shangpin.name)+" ")],1),e("div",{staticClass:"fn-clear"}),e("div",{staticClass:"shangpin-info clearfix"},[e("div",{staticClass:"pic-area"},[e("div",{staticClass:"big-img"},[e("img",{attrs:{src:t.hostHead+t.bigPic}})]),e("div",{staticClass:"small-imgs owl-carousel"},t._l(t.shangpin.images,(function(s,a){return e("div",{class:a==t.selectedIndex?"active item":"item",on:{click:function(e){return t.select(s,a)}}},[e("img",{attrs:{src:t.hostHead+s}})])})),0)]),e("div",{staticClass:"props"},[e("div",{staticClass:"title"},[t._v(" "+t._s(t.shangpin.name)+" ")]),e("div",{staticClass:"subtitle"},[t._v(" "+t._s(t.shangpin.subtitle)+" ")]),e("div",{staticClass:"price-block clearfix"},[e("div",{staticClass:"mall-price clearfix"},[e("div",{staticClass:"label"},[t._v("商城价:")]),e("div",{staticClass:"price"},[t._v(" ¥ "+t._s(t.shangpin.hyjia))])])]),e("div",{staticClass:"prop",staticStyle:{"margin-top":"20px"}},[e("dl",{staticClass:"clearfix"},[e("dt",[t._v("库存")]),e("dd",[t._v(t._s(t.shangpin.kucun)+t._s(t.shangpin.danwei))])])]),e("div",{staticClass:"prop",staticStyle:{"margin-top":"20px"}},[e("dl",{staticClass:"clearfix"},[e("dt",[t._v(" 口味")]),e("dd",[t._v(t._s(t.shangpin.chandi))])])]),e("div",{staticClass:"prop"},[e("dl",{staticClass:"clearfix"},[e("dt",[t._v("数量")]),e("dd",[e("el-input-number",{attrs:{min:1,max:10,label:"描述文字"},model:{value:t.count,callback:function(e){t.count=e},expression:"count"}})],1)])]),e("div",{staticClass:"prop"},[e("el-button-group",[e("el-button",{attrs:{type:"primary"},on:{click:t.shoucangHandler}},[e("i",{staticClass:"fa fa-star"}),t._v("收藏")]),t.shangpin.kucun>0?e("el-button",{attrs:{icon:"el-icon-plus",type:"danger"},on:{click:t.toCartHandler}},[t._v(" 加入购物车 ")]):t._e()],1)],1)])]),null!=t.listRecomment&&t.listRecomment.length>0?e("div",{staticClass:"video-list"},[e("div",{staticClass:"hd"},[t._v(" 猜你喜欢商品 ")]),e("div",{staticClass:"bd"},t._l(t.listRecomment,(function(s){return e("div",{staticClass:"item"},[e("div",{staticClass:"card"},[e("a",{attrs:{href:t.hostHead+"/e/shangpininfo?id="+s.id}},[e("div",{staticClass:"pic"},[e("img",{staticClass:"image",attrs:{src:t.hostHead+s.images[0]}})]),e("div",{staticClass:"name"},[t._v(" "+t._s(s.name)+"--("+t._s(s.tagname)+") ")]),e("div",{staticClass:"discount"}),e("div",{staticClass:"price"},[t._v("¥"+t._s(s.hyjia))])])])])})),0)]):t._e(),e("el-tabs",{attrs:{value:"first"}},[e("el-tab-pane",{attrs:{label:"商品介绍",name:"first"}},[e("div",{staticClass:"brief-content",domProps:{innerHTML:t._s(t.shangpin.jieshao)}})]),e("el-tab-pane",{attrs:{label:"商品评价",name:"second"}},[e("div",{staticClass:"spcomment-list"},[t._l(t.listComment,(function(s){return e("div",{staticClass:"item clearfix"},[e("div",{staticClass:"lfar"},[e("img",{staticClass:"photo",attrs:{src:t.hostHead+s.touxiang}})]),e("div",{staticClass:"rgar"},[e("div",{staticClass:"trow"},[t._v(" "+t._s(s.accountname)+"("+t._s(s.name)+") ")]),e("div",{staticClass:"trow"},[e("el-rate",{attrs:{value:s.cresult}}),t._v(" "+t._s(s.des)+" ")],1)])])})),0==t.listComment.length?e("div",{staticClass:"no-record-tip"},[e("div",{staticClass:"content"},[e("i",{staticClass:"fa fa-warning"}),t._v("暂无相关评论 ")])]):t._e()],2)])],1),e("el-dialog",{attrs:{title:"给他留言",visible:t.lwDlg},on:{"update:visible":function(e){t.lwDlg=e}}},[e("div",{staticClass:"stdrow"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dcontent,expression:"dcontent"}],staticClass:"lwta",attrs:{name:"dcontent",maxlength:"500",placeholder:"在线留言"},domProps:{value:t.dcontent},on:{input:function(e){e.target.composing||(t.dcontent=e.target.value)}}})]),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.lwDlg=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.lwHandler}},[t._v("确 定")])],1)]),e("loginmodal",{attrs:{show:t.openLogin},on:{"update:show":function(e){t.openLogin=e}}})],1),e("bottom")],1)},i=[],n=s("f558"),o=s("3869"),l=s("4a62"),r=(s("e937"),s("bf48")),d={name:"shangpininfo",data(){return{listComment:[],bigPic:"",count:1,hostHead:this.$app.contextPath,listRecomment:[],listCoupon:[],selectedIndex:0,shanghu:{},shangpin:{},openLogin:!1,lwDlg:!1,dcontent:""}},created(){let t=this.$route.query.id;this.getShangpin(t),this.getComment(t)},methods:{async ljHandler(t){if(null==t)return this.$message.error("不能为空");if(!this.isLogin)return void(this.openLogin=!0);let{data:e}=await this.$http.post("admin/courecord/save",{hyid:this.huiyuan.id,couponid:t});null!=e&&e.stateCode<0?this.$message.error(e.des):this.$message.success("领劵成功")},async getComment(t){let e="admin/spcomment/list",{data:s}=await this.$http.post(e,{spid:t,ispaged:"-1"});null!=s&&s.stateCode<0?this.$message.error(s.des):this.listComment=s.data},async getCoupons(){let t="admin/coupon/list",{data:e}=await this.$http.post(t,{ispaged:"-1"});null!=e&&e.stateCode<0?this.$message.error(e.des):this.listCoupon=e.data},getRecomment(){let t="admin/shangpin/recomment";this.$http.post(t).then(t=>{console.log(t.data),null!=t.data&&null!=t.data.data&&(this.listRecomment=t.data.data)})},select(t,e){this.bigPic=t,this.selectedIndex=e},async getShangpin(t){let e="admin/shangpin/info",s={id:t};""!=this.hyid&&(s.hyid=this.hyid);let{data:a}=await this.$http.post(e,s);this.shangpin=a.data,this.bigPic=this.shangpin.images[0]},toCartHandler(){if(!this.isLogin)return void(this.openLogin=!0);let t=new SmartStorage,e={id:this.shangpin.id,name:this.shangpin.name,tupian:this.shangpin.images[0],count:this.count,selected:!0,price:this.shangpin.jiage,typename:this.shangpin.typename};t.add(this.shangpin.id,e),this.$router.push("/e/shopcart")},async shoucangHandler(){if(!this.isLogin)return void(this.openLogin=!0);let t="admin/shoucang/save";console.log("shanppin.id=",this.shangpin.id);let{data:e}=await this.$http.post(t,{targetid:this.shangpin.id,targetname:this.shangpin.name,tupian:this.shangpin.images[0],hyid:this.huiyuan.id,xtype:"shangpin",href:"/e/shangpininfo?id="+this.shangpin.id});null!=e&&e.stateCode<0?this.$message.error(e.des):this.$message.success("收藏成功")},async getShanghu(t){let e=new r["VueUtil"](this);if(""!=t){let s="admin/shanghu/load",{data:a}=await e.http.post(s,{id:t});console.log("res",a),null!=a&&null!=a.data&&(this.shanghu=a.data)}},openLwHandler(){this.isLogin?this.lwDlg=!0:this.openLogin=!0},async lwHandler(){if(""==this.dcontent)return void alert("输入留言内容");let t="admin/leaveword/save",e=await this.$http.post(t,{dcontent:this.dcontent,hyid:this.huiyuan.id,targetid:this.shanghu.id});e.data.stateCode>0&&(this.dcontent="",this.lwDlg=!1,this.$message.success("留言成功"))}},computed:{huiyuan(){return this.$app.mycas.getAccount(this.$app.mycas.huiyuan_key)},isLogin(){return this.$app.mycas.isLogin(this.$app.mycas.huiyuan_key)}},components:{Bottom:o["default"],Shead:n["default"],Loginmodal:l["default"]}},c=d,u=s("2877"),h=Object(u["a"])(c,a,i,!1,null,"99e747d6",null);e["default"]=h.exports},3869:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"page-footer3"},[e("div",{staticClass:"desinfo2"},[e("route-template",{attrs:{url:"/admin/login"}},[t._v("系统登录")])],1)])])},i=[],n={name:"bottom",data(){return{hostHead:this.$app.contextPath}}},o=n,l=(s("65e8"),s("2877")),r=Object(l["a"])(o,a,i,!1,null,"4ab5ff9c",null);e["default"]=r.exports},"4a62":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{width:"30%","close-on-click-modal":!1,visible:t.show},on:{"update:visible":t.closeHandler}},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v("会员登录")]),e("el-form",{ref:"form",attrs:{"label-width":"80px"}},[e("el-form-item",{attrs:{label:"名称"}},[e("el-input",{attrs:{"prefix-icon":"el-icon-user"},model:{value:t.accountname,callback:function(e){t.accountname=e},expression:"accountname"}})],1),e("el-form-item",{attrs:{label:"密码"}},[e("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.loginHandler}},[t._v("确 定")]),e("el-button",{on:{click:t.cancelHandler}},[t._v("取 消")]),e("el-divider"),e("router-link",{attrs:{to:"/e/register"}},[t._v("注册")])],1)],1)],1)},i=[],n={name:"loginmodal",data(){return{accountname:"",password:"",hostHead:this.$app.contextPath}},methods:{cancelHandler(){this.$emit("update:show",!1)},async loginHandler(){let t="admin/admin/login",{data:e}=await this.$http.post(t,{username:this.accountname,password:this.password,usertype:2});null!=e&&e.stateCode<0?this.$message.error(e.des):null!=e&&e.stateCode>0&&(console.log("登录成功"),this.$emit("update:show",!1),this.$app.mycas.login(this.$app.mycas.huiyuan_key,e.data),this.$emit("afterLogin",!0),window.location.reload())},closeHandler(t){console.log("执行关闭"),this.$emit("update:show",t)}},props:{show:{type:Boolean,default:!1}}},o=n,l=s("2877"),r=Object(l["a"])(o,a,i,!1,null,"5d557784",null);e["default"]=r.exports},"65e8":function(t,e,s){"use strict";s("fa87")},bf48:function(t,e,s){"use strict";s.r(e),s.d(e,"MyFilters",(function(){return a})),s.d(e,"ModalDialogUtils",(function(){return i})),s.d(e,"VueUtil",(function(){return n})),Date.prototype.format=function(t){let e={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(let s in e)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[s]:("00"+e[s]).substr((""+e[s]).length)));return t};const a={filters:{formatDate:function(t,e="yyyy-MM-dd"){return"string"!=typeof t?t:new Date(t).format(e)}}},i={data(){return{dlgParam:{},dlgTitle:"",dlgVisible:!1}},components:{},props:{param:{type:Object}},methods:{showDlg(t,e){"string"==typeof e?null!=this.$refs[e]?this.$refs[e].show(t):this.$message.error("没找到窗体"):this.$message.error("对话框参数异常")}}};let n=function(t){this.http=t.$http,this.alert=t.$alert,this.confirm=t.$confirm,this.message=t.$message,this.isDuringDate=function(t,e){let s=new Date,a=new Date(t),i=new Date(e);return s>=a&&s<=i},this.isPasted=function(t,e){let s=new Date,a=(new Date(t),new Date(e));return s>a}}},e937:function(t,e){(function(){let t=function(){let t={};this.count=0,this.add=function(e,s){return!t.hasOwnProperty(e)&&(t[e]=s,this.count++,!0)},this.contain=function(e){return t.hasOwnProperty(e)},this.get=function(e){return this.contain(e)?t[e]:null},this.remove=function(e){this.contain(e)&&(delete t[e],this.count--)},this.clear=function(){t={},this.count=0},this.getData=function(){return t},this.setData=function(e){return t=e}},e=function(){let e="locshopcart";this.add=function(s,a){let i=window.localStorage.getItem(e),n=new t;null!=i&&n.setData(JSON.parse(i));let o=n.get(s);null==o?n.add(s,a):o.count=o.count+a.count,console.log("数据对象",n.getData()),window.localStorage.setItem(e,JSON.stringify(n.getData()))},this.remove=function(s){let a=window.localStorage.getItem(e),i=new t;null!=a&&i.setData(JSON.parse(a)),i.remove(s),window.localStorage.setItem(e,JSON.stringify(i.getData()))},this.getItems=function(){let s=window.localStorage.getItem(e);console.log("strCart",s);let a=[],i=new t;null!=s&&i.setData(JSON.parse(s)),console.log("map.getData()=",i.getData());for(let t in i.getData())a.push({id:t,value:i.getData()[t]});return console.log("arr=",a),a},this.update=function(s,a){let i=window.localStorage.getItem(e),n=new t;null!=i&&n.setData(JSON.parse(i));let o=n.get(s);null==o?n.add(s,a):Object.assign(o,a),window.localStorage.setItem(e,JSON.stringify(n.getData()))},this.clear=function(){window.localStorage.removeItem(e)}};window.SmartStorage=e})()},f558:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{attrs:{id:"searchss"}},[e("div",{staticClass:"search"},[t._m(0),e("div",{staticClass:"sear_input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"请输入关键字"},domProps:{value:t.keyword},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchHandler.apply(null,arguments)},input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),e("button",{on:{click:t.searchHandler}},[e("i",{staticClass:"el-icon-search"})])]),e("div",{staticClass:"sear_fir"},[e("div",{staticClass:"sinup"},[t.isLogin()||t.isAdminLogin()?t._e():e("route-template",{attrs:{url:"/admin/login"}},[e("span",{staticClass:"item"},[t._v("登录")])]),e("a",[t._v("/")]),e("route-template",{attrs:{url:"/e/register"}},[e("span",{staticClass:"item"},[t._v("注册")])]),e("a",[t._v("/")]),e("route-template",{attrs:{url:"/e/shopcart"}},[e("span",{staticClass:"item"},[t._v("购物车")])])],1),t.isLogin()?[e("el-dropdown",{staticStyle:{padding:"2px 10px"}},[e("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(t.huiyuan.accountname)+"--"+t._s(t.huiyuan.name)+" "),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("route-template",{attrs:{url:"/huiyuan/index"}},[e("i",{staticClass:"fa fa-user"}),t._v("账户信息 ")])],1),e("el-dropdown-item",{attrs:{divided:""}}),e("el-dropdown-item",{nativeOn:{click:function(e){return t.exitHandler(2)}}},[e("span",{staticClass:"exit"},[t._v("退出")])])],1)],1)]:t._e(),t.isAdminLogin()?[e("el-dropdown",{staticStyle:{padding:"2px 10px"}},[e("span",{staticClass:"el-dropdown-link pointer"},[t._v(" "+t._s(t.users.username)+"--"+t._s(t.users.name)+"(管理员) "),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("route-template",{attrs:{url:"/admin/index"}},[e("i",{staticClass:"fa fa-user"}),t._v("账户信息 ")])],1),e("el-dropdown-item",{attrs:{divided:""}}),e("el-dropdown-item",{nativeOn:{click:function(e){return t.exitHandler(1)}}},[e("span",{staticClass:"exit"},[t._v("退出")])])],1)],1)]:t._e()],2)])]),e("div",{staticStyle:{height:"100px"}}),e("div",{attrs:{id:"navall"}},[e("div",{attrs:{id:"nav"}},[e("ul",{attrs:{id:"inav"}},t._l(t.listSitenav,(function(s){return e("li",{key:s.id},[t.withParam(s.href)?e("span",{class:{active:s.id==t.headid,item:!0},on:{click:function(e){return t.navigatePage(s.href+"&headid="+s.id)}}},[t._v(t._s(s.title))]):e("span",{class:{active:s.id==t.headid,item:!0},attrs:{id:s.id},on:{click:function(e){return t.navigatePage(s.href+"?headid="+s.id)}}},[t._v(t._s(s.title))])])})),0)])]),e("loginmodal",{attrs:{show:t.logindlg},on:{"update:show":function(e){t.logindlg=e}}})],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"logo"},[e("div",{staticClass:"sitetitle"},[t._v("“遇见”预约订餐系统")])])}],n=s("4a62"),o={name:"shead",components:{Loginmodal:n["default"]},data(){return{listSitenav:[],keyword:"",logindlg:!1,hostHead:this.$app.contextPath}},methods:{withParam(t){return null!=t&&t.split("?").length>1},async list(){let t="admin/sitenav/list",e={ispaged:"-1",order:" order by id desc"},{data:s}=await this.$http.post(t,e);null!=s.data&&(console.log("header res=",s),this.listSitenav=s.data)},navigatePage(t){null!=t&&""!=t&&(this.$router.push(t),this.$app.key=t)},isLogin(){return this.$app.mycas.isLogin(this.$app.mycas.huiyuan_key)},isAdminLogin(){return this.$app.mycas.isLogin(this.$app.mycas.users_key)},async exitHandler(t){this.$confirm("确定要离开?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async e=>{let{data:s}=await this.$http.post("admin/admin/exit",{usertype:t});null!=s&&s.stateCode<0?this.$message.error(s.des):(2==t&&this.$app.mycas.logout(this.$app.mycas.huiyuan_key),1==t&&this.$app.mycas.logout(this.$app.mycas.users_key),window.location.reload())}).catch(t=>{})},searchHandler(){""!=this.keyword?this.$router.push("/e/search?title="+this.keyword):this.$message.error("请输入搜索内容")}},created(){this.list()},props:{headid:{type:String,default:"1"}},computed:{huiyuan(){return this.$app.mycas.getAccount(this.$app.mycas.huiyuan_key)},users(){return this.$app.mycas.getAccount(this.$app.mycas.users_key)}}},l=o,r=s("2877"),d=Object(r["a"])(l,a,i,!1,null,"7e6522d7",null);e["default"]=d.exports},fa87:function(t,e,s){}}]);
//# sourceMappingURL=chunk-534488b6.37bd4c57.js.map