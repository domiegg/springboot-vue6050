(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fa83f9c","chunk-2d21b2be"],{bf48:function(t,e,l){"use strict";l.r(e),l.d(e,"MyFilters",(function(){return i})),l.d(e,"ModalDialogUtils",(function(){return s})),l.d(e,"VueUtil",(function(){return a})),Date.prototype.format=function(t){let e={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(let l in e)new RegExp("("+l+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[l]:("00"+e[l]).substr((""+e[l]).length)));return t};const i={filters:{formatDate:function(t,e="yyyy-MM-dd"){return"string"!=typeof t?t:new Date(t).format(e)}}},s={data(){return{dlgParam:{},dlgTitle:"",dlgVisible:!1}},components:{},props:{param:{type:Object}},methods:{showDlg(t,e){"string"==typeof e?null!=this.$refs[e]?this.$refs[e].show(t):this.$message.error("没找到窗体"):this.$message.error("对话框参数异常")}}};let a=function(t){this.http=t.$http,this.alert=t.$alert,this.confirm=t.$confirm,this.message=t.$message,this.isDuringDate=function(t,e){let l=new Date,i=new Date(t),s=new Date(e);return l>=i&&l<=s},this.isPasted=function(t,e){let l=new Date,i=(new Date(t),new Date(e));return l>i}}},e74a:function(t,e,l){"use strict";l.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"panel panel-default"},[e("div",{staticClass:"panel-heading"},[t._v(" 新闻管理 ")]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"search-options"},[e("table",{attrs:{cellspacing:"0",width:"100%"}},[e("tbody",[e("tr",[e("td",[t._v(" 标题: "),e("div",{staticStyle:{width:"200px",display:"inline-block"}},[e("el-input",{attrs:{placeholder:"标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" 类别: "),e("el-cascader",{attrs:{options:t.options,props:{checkStrictly:!0},clearable:""},model:{value:t.lmvalue,callback:function(e){t.lmvalue=e},expression:"lmvalue"}}),e("el-button",{attrs:{type:"danger",icon:"el-icon-search"},on:{click:t.search}},[t._v("查找")])],1)])])])]),e("div",{staticClass:"clear"}),e("div",{staticClass:"action-details"},[e("el-button-group",[e("el-button",{attrs:{type:"success",icon:"el-icon-check"},on:{click:t.selectedAllHandler}},[t._v("选择")]),e("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.deleteRec}},[t._v(" 删除")])],1)],1),e("table",{staticClass:"ui-record-table",attrs:{id:"xinxi",width:"100%",border:"0",cellspacing:"0",cellpadding:"0"}},[e("thead",[e("tr",[e("th",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedAll,expression:"selectedAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selectedAll)?t._i(t.selectedAll,null)>-1:t.selectedAll},on:{click:t.selectedAllHandler,change:function(e){var l=t.selectedAll,i=e.target,s=!!i.checked;if(Array.isArray(l)){var a=null,n=t._i(l,a);i.checked?n<0&&(t.selectedAll=l.concat([a])):n>-1&&(t.selectedAll=l.slice(0,n).concat(l.slice(n+1)))}else t.selectedAll=s}}})]),t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),e("th",[t._v(" 操作 ")])])]),e("tbody",[t._l(t.listXinxi,(function(l,i){return e("tr",{key:l.id},[e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:l.rowSelected,expression:"xinxi.rowSelected"}],staticClass:"check",attrs:{name:"ids",type:"checkbox"},domProps:{checked:Array.isArray(l.rowSelected)?t._i(l.rowSelected,null)>-1:l.rowSelected},on:{change:function(e){var i=l.rowSelected,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n=null,c=t._i(i,n);s.checked?c<0&&t.$set(l,"rowSelected",i.concat([n])):c>-1&&t.$set(l,"rowSelected",i.slice(0,c).concat(i.slice(c+1)))}else t.$set(l,"rowSelected",a)}}})]),e("td",[t._v(" "+t._s(l.title)+" ")]),e("td",[t._v(" "+t._s(l.lmname)+"/"+t._s(l.subtypename)+" ")]),e("td",t._l(l.tags,(function(l){return e("el-tag",{attrs:{type:"warning"}},[t._v(" "+t._s(l.name)+" ")])})),1),e("td",[1==l.envideo?e("el-tag",[t._v("签入视频")]):e("el-tag",[t._v("否")])],1),e("td",[t._v(" "+t._s(l.pubtime)+" ")]),e("td",[e("i",{staticClass:"fa fa-eye"}),t._v(t._s(l.clickcount)+"次 ")]),e("td",[e("el-button-group",[e("router-link",{staticClass:"el-button el-button--primary el-button--small",attrs:{to:"/admin/xinxiadd?id="+l.id}},[e("i",{staticClass:"el-icon-edit"}),t._v("编辑 ")]),1==l.state?e("router-link",{staticClass:"el-button el-button--danger el-button--small",attrs:{to:"/admin/xinxidetails?id="+l.id}},[e("i",{staticClass:"el-icon-arrow-right"}),t._v("审核")]):t._e(),1!=l.state?e("router-link",{staticClass:"el-button el-button--warning el-button--small",attrs:{to:"/admin/xinxidetails?id="+l.id}},[e("i",{staticClass:"el-icon-info"}),t._v("详细")]):t._e()],1)],1)])})),0==t.listXinxi.length?e("tr",[e("td",{attrs:{colspan:"20"}},[t._v(" 没有相关新闻信息 ")])]):t._e()],2)]),e("div",{staticClass:"clear"}),e("el-pagination",{attrs:{background:"","current-page":t.pageindex,"page-sizes":[t.pagesize],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.pagesizeChange,"current-change":t.pageindexChange}})],1)])},s=[function(){var t=this,e=t._self._c;return e("th",{attrs:{width:"220px;"}},[e("b",[t._v("标题")])])},function(){var t=this,e=t._self._c;return e("th",[e("b",[t._v("类别")])])},function(){var t=this,e=t._self._c;return e("th",[e("b",[t._v("标签")])])},function(){var t=this,e=t._self._c;return e("th",[e("b",[t._v("签入视频")])])},function(){var t=this,e=t._self._c;return e("th",[e("b",[t._v("发布时间")])])},function(){var t=this,e=t._self._c;return e("th",[e("b",[t._v("点击次数")])])}],a=l("bf48"),n={name:"xinximanager",data(){return{hostHead:this.$app.contextPath,listXinxi:[],options:[],lmvalue:[],pageindex:1,pagesize:10,total:10,selectedAll:!1,title:""}},async created(){console.log("created"),this.search(),this.getLanmus()},async mounted(){},methods:{pagesizeChange:function(t){this.pagesize=t},pageindexChange:function(t){this.pageindex=t,console.log(this.pageindex),this.search()},search(){let t={currentpageindex:this.pageindex,pagesize:this.pagesize,title:this.title};null!=this.lmvalue&&this.lmvalue.length>0&&(t.lmid=this.lmvalue[0]),null!=this.lmvalue&&this.lmvalue.length>=2&&(t.subtypeid=this.lmvalue[1]);let e="admin/xinxi/list";this.$http.post(e,t).then(t=>{if(console.log(t.data),null!=t.data&&null!=t.data.data){let e=t.data.data;this.total=e.total,null!=e.list&&(e.list.forEach(t=>{t.rowSelected=!1}),this.listXinxi=e.list)}})},async getLanmus(){let t="admin/xinxi/cascadelanmu",{data:e}=await this.$http.post(t,{id:this.lanmuid});e.stateCode<0?this.$message.error(e.des):this.options=e.data},selectedAllHandler(){this.selectedAll=!this.selectedAll,null!=this.listXinxi&&this.listXinxi.forEach(t=>{t.rowSelected=this.selectedAll})},async deleteOne(t){let e=new a["VueUtil"](this);if(null==t)return;let l=[t];e.confirm("是否要删除数据?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.http.post("admin/shangpin/delete",{ids:l},{emulateJSON:!1}).then(t=>{null!=t.data&&t.data.stateCode>0&&(e.message.success("删除成功"),this.search())})}).catch(()=>{})},async deleteRec(){let t="admin/xinxi/delete",e=new a["VueUtil"](this),l=this.listXinxi.filter(t=>t.rowSelected).map(t=>t.id);if(null!=l&&l.length<=0)return void e.alert("请选择需要删除的记录","系统提示",{confirmButtonText:"确定"});e.confirm("是否要删除数据?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.http.post(t,{ids:l},{emulateJSON:!1}).then(t=>{null!=t.data&&t.data.stateCode>0&&(e.message.success("删除成功"),this.search())})}).catch(()=>{})}}},c=n,r=l("829d"),o=Object(r["a"])(c,i,s,!1,null,"7d1c0472",null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-4fa83f9c.852a5f79.js.map