(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a4b99"],{"0850":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;return t.visible?s("el-dialog",{attrs:{title:"分配送餐员",visible:t.visible,width:"70%",top:"5vh","append-to-body":""},on:{"update:visible":function(s){t.visible=s}}},[s("el-card",{staticClass:"box-card"},[s("div",{staticStyle:{margin:"22px 30px"}},[s("el-steps",{attrs:{space:200,active:3,"finish-status":"success"}},[s("el-step",{attrs:{title:"下单"}}),s("el-step",{attrs:{title:"付款"}}),s("el-step",{attrs:{title:"派送"}}),s("el-step",{attrs:{title:"收货评价"}})],1)],1),s("table",{staticClass:"smart-table",attrs:{border:"1"}},[s("tr",[s("td",{staticClass:"tlabel"},[t._v("订单编号")]),s("td",[t._v(t._s(t.order.ddno))]),s("td",{staticClass:"tlabel"},[t._v("下单时间:")]),s("td",[t._v(" "+t._s(t.order.createtime)+" ")])]),s("tr",[s("td",{staticClass:"tlabel"},[t._v("总金额")]),s("td",[t._v(t._s(t.order.totalfee)+"¥")]),s("td",{staticClass:"tlabel"},[t._v("下单人")]),s("td",[t._v(t._s(t.order.puraccount)+"("+t._s(t.order.purname)+")")])]),s("tr",[s("td",{staticClass:"tlabel"},[t._v("派送员")]),s("td",{attrs:{colspan:"3"}},[2==t.order.state?s("div",{staticStyle:{width:"300px"}},[s("el-select",{model:{value:t.zyid,callback:function(s){t.zyid=s},expression:"zyid"}},t._l(t.listUsers,(function(t){return s("el-option",{attrs:{value:t.id,label:t.realname+"---"+t.username}})})),1)],1):t._e()])])]),s("table",{staticClass:"ui-record-table",attrs:{width:"100%",border:"0",cellspacing:"0",cellpadding:"0"}},[s("thead",[s("tr",[s("th",[t._v("名称")]),s("th",[t._v("价格")]),s("th",[t._v("数量")]),s("th",[t._v("状态")])])]),s("tbody",[t._l(t.order.orderDetail,(function(e){return s("tr",[s("td",[s("img",{attrs:{width:"80",height:"80",src:t.hostHead+e.images[0]}}),t._v(" "+t._s(e.spname))]),s("td",[t._v(t._s(e.price)+"元")]),s("td",[t._v(t._s(e.count))]),s("td",[1==e.state?s("span",[t._v("待付款")]):t._e(),2==e.state?s("span",[t._v("已付款")]):t._e(),3==e.state?s("span",[t._v(" 物流号:"+t._s(e.wlno)+" ")]):t._e(),4==e.state?s("span",[t._v("已完成")]):t._e(),5==e.state?s("span",[t._v("已取消")]):t._e()])])})),s("tr",[s("td",{attrs:{colspan:"4"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.dispatchHandler}},[s("i",{staticClass:"el-icon-arrow-right"}),t._v("分配")])],1)])],2)])])],1):t._e()},i=[],r={name:"shorderdetails",data(){return{visible:!1,oiid:this.$route.query.oiid,wlno:"",zyid:1,listUsers:[],hostHead:this.$app.contextPath,order:{},receaddress:null}},methods:{async show(t){if(null==t)return this.$message.error("订单信息不能为空");this.order=t,await this.getUsers(),await this.getOrderInfo(),this.visible=!0},async getUsers(){let{data:t}=await this.$http.post("admin/users/list",{ispaged:"-1",roleid:2});t.stateCode<0?this.$message.error(t.des):(this.listUsers=t.data,null!=this.listUsers&&this.listUsers.length>0&&(this.zyid=this.listUsers[0].id))},async getOrderInfo(){let{data:t}=await this.$http.post("admin/shorder/load",{id:this.order.id});t.stateCode<0?this.$message.error(t.des):(console.log("订单数据",t),this.order=t.data)},async dispatchHandler(){this.$confirm("是否要派送?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{let{data:t}=await this.$http.post("admin/shorder/dispatch",{id:this.order.id,zyid:this.zyid});t.stateCode<0?this.$message.error(t.des):(this.$message.success("派送完成"),this.$emit("over"),this.visible=!1)}).catch(()=>{})},async getAddress(){let{data:t}=await this.$http.post("admin/receaddress/load",{id:this.order.addid});t.stateCode<0?this.$message.error(t.des):(this.receaddress=t.data,console.log("receaddress",this.receaddress))}},async created(){}},d=r,l=e("2877"),o=Object(l["a"])(d,a,i,!1,null,"54fa7c8d",null);s["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d0a4b99.5b422602.js.map