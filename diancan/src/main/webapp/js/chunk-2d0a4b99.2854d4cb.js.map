{"version":3,"sources":["webpack:///./src/admin/dispatchshorder.vue","webpack:///src/admin/dispatchshorder.vue","webpack:///./src/admin/dispatchshorder.vue?7dac","webpack:///./src/admin/dispatchshorder.vue?2ec4"],"names":["render","_vm","this","_c","_self","visible","attrs","on","$event","staticClass","staticStyle","_v","_s","order","ddno","createtime","totalfee","puraccount","purname","state","model","value","zyid","callback","$$v","expression","_l","listUsers","item","id","realname","username","_e","orderDetail","od","hostHead","images","spname","price","count","wlno","dispatchHandler","staticRenderFns","name","data","oiid","$route","query","$app","contextPath","receaddress","methods","$message","error","getUsers","getOrderInfo","res","$http","post","roleid","stateCode","des","length","console","log","$confirm","confirmButtonText","cancelButtonText","type","then","success","$emit","catch","addid","component"],"mappings":"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","file":"js/chunk-2d0a4b99.2854d4cb.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.visible)?_c('el-dialog',{attrs:{\"title\":\"分配送餐员\",\"visible\":_vm.visible,\"width\":\"70%\",\"top\":\"5vh\",\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticStyle:{\"margin\":\"22px 30px\"}},[_c('el-steps',{attrs:{\"space\":200,\"active\":3,\"finish-status\":\"success\"}},[_c('el-step',{attrs:{\"title\":\"下单\"}}),_c('el-step',{attrs:{\"title\":\"付款\"}}),_c('el-step',{attrs:{\"title\":\"派送\"}}),_c('el-step',{attrs:{\"title\":\"收货评价\"}})],1)],1),_c('table',{staticClass:\"smart-table\",attrs:{\"border\":\"1\"}},[_c('tr',[_c('td',{staticClass:\"tlabel\"},[_vm._v(\"订单编号\")]),_c('td',[_vm._v(_vm._s(_vm.order.ddno))]),_c('td',{staticClass:\"tlabel\"},[_vm._v(\"下单时间:\")]),_c('td',[_vm._v(\" \"+_vm._s(_vm.order.createtime)+\" \")])]),_c('tr',[_c('td',{staticClass:\"tlabel\"},[_vm._v(\"总金额\")]),_c('td',[_vm._v(_vm._s(_vm.order.totalfee)+\"¥\")]),_c('td',{staticClass:\"tlabel\"},[_vm._v(\"下单人\")]),_c('td',[_vm._v(_vm._s(_vm.order.puraccount)+\"(\"+_vm._s(_vm.order.purname)+\")\")])]),_c('tr',[_c('td',{staticClass:\"tlabel\"},[_vm._v(\"派送员\")]),_c('td',{attrs:{\"colspan\":\"3\"}},[(_vm.order.state==2)?_c('div',{staticStyle:{\"width\":\"300px\"}},[_c('el-select',{model:{value:(_vm.zyid),callback:function ($$v) {_vm.zyid=$$v},expression:\"zyid\"}},_vm._l((_vm.listUsers),function(item){return _c('el-option',{attrs:{\"value\":item.id,\"label\":item.realname+'---'+item.username}})}),1)],1):_vm._e()])])]),_c('table',{staticClass:\"ui-record-table\",attrs:{\"width\":\"100%\",\"border\":\"0\",\"cellspacing\":\"0\",\"cellpadding\":\"0\"}},[_c('thead',[_c('tr',[_c('th',[_vm._v(\"名称\")]),_c('th',[_vm._v(\"价格\")]),_c('th',[_vm._v(\"数量\")]),_c('th',[_vm._v(\"状态\")])])]),_c('tbody',[_vm._l((_vm.order.orderDetail),function(od){return _c('tr',[_c('td',[_c('img',{attrs:{\"width\":\"80\",\"height\":\"80\",\"src\":_vm.hostHead+od.images[0]}}),_vm._v(\" \"+_vm._s(od.spname))]),_c('td',[_vm._v(_vm._s(od.price)+\"元\")]),_c('td',[_vm._v(_vm._s(od.count))]),_c('td',[(od.state==1)?_c('span',[_vm._v(\"待付款\")]):_vm._e(),(od.state==2)?_c('span',[_vm._v(\"已付款\")]):_vm._e(),(od.state==3)?_c('span',[_vm._v(\" 物流号:\"+_vm._s(od.wlno)+\" \")]):_vm._e(),(od.state==4)?_c('span',[_vm._v(\"已完成\")]):_vm._e(),(od.state==5)?_c('span',[_vm._v(\"已取消\")]):_vm._e()])])}),_c('tr',[_c('td',{attrs:{\"colspan\":\"4\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.dispatchHandler}},[_c('i',{staticClass:\"el-icon-arrow-right\"}),_vm._v(\"分配\")])],1)])],2)])])],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <el-dialog\r\n        v-if=\"visible\"\r\n        title=\"分配送餐员\"\r\n        :visible.sync=\"visible\"\r\n        width=\"70%\"\r\n        top=\"5vh\"\r\n        append-to-body\r\n    >\r\n        <el-card  class=\"box-card\">\r\n\r\n            <div style=\"margin:22px 30px; \">\r\n                <el-steps :space=\"200\" :active=\"3\" finish-status=\"success\">\r\n                    <el-step title=\"下单\"></el-step>\r\n                    <el-step title=\"付款\"></el-step>\r\n                    <el-step title=\"派送\"></el-step>\r\n                    <el-step title=\"收货评价\"></el-step>\r\n                </el-steps>\r\n            </div>\r\n\r\n            <table border=\"1\" class=\"smart-table\">\r\n                <tr>\r\n                    <td class=\"tlabel\">订单编号</td>\r\n                    <td>{{order.ddno}}</td>\r\n                    <td class=\"tlabel\">下单时间:</td>\r\n                    <td>\r\n                        {{order.createtime}}\r\n\r\n                    </td>\r\n                </tr>\r\n\r\n                <tr>\r\n                    <td class=\"tlabel\">总金额</td>\r\n                    <td >{{order.totalfee}}¥</td>\r\n\r\n                    <td class=\"tlabel\">下单人</td>\r\n                    <td >{{order.puraccount}}({{order.purname}})</td>\r\n\r\n                </tr>\r\n                <tr>\r\n                    <td class=\"tlabel\">派送员</td>\r\n                    <td colspan=\"3\">\r\n                        <div style=\"width:300px; \" v-if=\"order.state==2\">\r\n                            <el-select v-model=\"zyid\">\r\n                                <el-option v-for=\"item in listUsers\" :value=\"item.id\" :label=\"item.realname+'---'+item.username\"></el-option>\r\n                            </el-select>\r\n                        </div>\r\n\r\n\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n            <table   width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"ui-record-table\">\r\n\r\n\r\n                <thead>\r\n\r\n                <tr>\r\n                    <th>名称</th>\r\n                    <th>价格</th>\r\n                    <th>数量</th>\r\n                    <th>状态</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n\r\n                <tr v-for=\"od in order.orderDetail\">\r\n                    <td><img width=\"80\" height=\"80\" :src=\"hostHead+od.images[0]\"/>\r\n                        {{od.spname}}</td>\r\n                    <td>{{od.price}}元</td>\r\n                    <td>{{od.count}}</td>\r\n                    <td>\r\n                        <span v-if=\"od.state==1\">待付款</span>\r\n                        <span v-if=\"od.state==2\">已付款</span>\r\n                        <span v-if=\"od.state==3\">\r\n                            物流号:{{od.wlno}}\r\n                        </span>\r\n                        <span v-if=\"od.state==4\">已完成</span>\r\n                        <span v-if=\"od.state==5\">已取消</span>\r\n\r\n\r\n\r\n                    </td>\r\n                </tr>\r\n\r\n                <tr >\r\n\r\n                    <td colspan=\"4\">\r\n                        <el-button  @click=\"dispatchHandler\" type=\"primary\"><i class=\"el-icon-arrow-right\"></i>分配</el-button>\r\n                    </td>\r\n                </tr>\r\n\r\n\r\n\r\n                </tbody>\r\n            </table>\r\n\r\n\r\n\r\n        </el-card>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"shorderdetails\",\r\n    data(){\r\n        return {\r\n            visible:false,\r\n            oiid: this.$route.query.oiid,\r\n            wlno: '',\r\n            zyid:1,\r\n            listUsers:[],\r\n            hostHead:this.$app.contextPath,\r\n            order: {},\r\n            receaddress: null\r\n        }\r\n    },\r\n\r\n\r\n    methods:{\r\n\r\n        async show(item){\r\n            if (item == null)\r\n                return this.$message.error(\"订单信息不能为空\");\r\n            this.order=item;\r\n            await this.getUsers();\r\n            await this.getOrderInfo();\r\n            this.visible = true;\r\n        },\r\n        async getUsers(){\r\n\r\n            let {data:res}=await this.$http.post(\"admin/users/list\",{\"ispaged\":\"-1\",roleid:2});\r\n\r\n            if (res.stateCode<0){\r\n                this.$message.error(res.des);\r\n                return ;\r\n            }\r\n            this.listUsers=res.data;\r\n            if(this.listUsers!=null&&this.listUsers.length>0)\r\n                this.zyid=this.listUsers[0].id;\r\n\r\n        },\r\n        async getOrderInfo(){\r\n\r\n            let {data:res}= await this.$http.post(\"admin/shorder/load\",{id:this.order.id});\r\n            if (res.stateCode<0){\r\n                this.$message.error(res.des);\r\n                return ;\r\n            }\r\n            console.log(\"订单数据\",res);\r\n            this.order=res.data;\r\n\r\n        },\r\n        async dispatchHandler() {\r\n\r\n\r\n            this.$confirm('是否要派送?', '系统提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning',\r\n            }).then(async () => {\r\n                let {data: res} = await this.$http.post(\"admin/shorder/dispatch\", {\r\n                    id: this.order.id,\r\n                    zyid: this.zyid\r\n                });\r\n\r\n                if (res.stateCode < 0) {\r\n                    this.$message.error(res.des);\r\n                    return;\r\n                }\r\n                this.$message.success(\"派送完成\");\r\n                this.$emit(\"over\");\r\n                this.visible=false;\r\n            }).catch(() => {\r\n            });\r\n\r\n\r\n        },\r\n        async getAddress(){\r\n\r\n            let {data:res}=await this.$http.post(\"admin/receaddress/load\",{id:this.order.addid});\r\n\r\n            if (res.stateCode<0){\r\n                this.$message.error(res.des);\r\n                return ;\r\n            }\r\n            this.receaddress=res.data;\r\n            console.log(\"receaddress\",this.receaddress);\r\n\r\n        }\r\n\r\n    },\r\n    async created(){\r\n\r\n    }\r\n\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!./dispatchshorder.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!./dispatchshorder.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./dispatchshorder.vue?vue&type=template&id=54fa7c8d&scoped=true\"\nimport script from \"./dispatchshorder.vue?vue&type=script&lang=js\"\nexport * from \"./dispatchshorder.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.11.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54fa7c8d\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}