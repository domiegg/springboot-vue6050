(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ac05a"],{1885:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mypanel"},[e("div",{staticClass:"hd"},[t._v(" 我收到消息 ")]),e("div",{staticClass:"bd"},[e("div",{staticClass:"clear"}),e("div",{staticClass:"action-details"},[e("el-button-group",[e("el-button",{attrs:{type:"success"},on:{click:t.selectedAllHandler}},[e("i",{staticClass:"el-icon-check"}),t._v("选择")]),e("el-button",{attrs:{type:"danger"},on:{click:t.deleteRc}},[e("i",{staticClass:"el-icon-delete"}),t._v("删除")])],1)],1),e("div",{staticClass:"lw-ct-wrap"},[e("div",{staticClass:"hd"},[e("div",{staticClass:"title"},[t._v("全部留言")]),e("div",{staticClass:"subtitle"},[t._v(t._s(t.listLeaveword.length)+"条")])]),e("div",{staticClass:"bd"},t._l(t.listLeaveword,(function(s){return e("div",{key:s.id,staticClass:"lw-item"},[e("div",{staticClass:"img-area"},[e("img",{staticClass:"image",attrs:{src:t.hostHead+s.pbrphoto}}),e("span",[e("input",{directives:[{name:"model",rawName:"v-model",value:s.rowSelected,expression:"lw.rowSelected"}],attrs:{type:"checkbox",name:"id"},domProps:{value:s.id,checked:Array.isArray(s.rowSelected)?t._i(s.rowSelected,s.id)>-1:s.rowSelected},on:{change:function(e){var a=s.rowSelected,l=e.target,i=!!l.checked;if(Array.isArray(a)){var r=s.id,c=t._i(a,r);l.checked?c<0&&t.$set(s,"rowSelected",a.concat([r])):c>-1&&t.$set(s,"rowSelected",a.slice(0,c).concat(a.slice(c+1)))}else t.$set(s,"rowSelected",i)}}})])]),e("div",{staticClass:"txt-area"},[e("div",{staticClass:"title"},[e("div",{staticClass:"prop"},[t._v(t._s(s.pbrname)+"--\x3e"+t._s(s.rpname))]),e("div",{staticClass:"prop"},[t._v(t._s(s.pubtime))])]),e("div",{staticClass:"data"},[t._v(" "+t._s(s.dcontent)+" ")]),1==s.state?e("div",{staticClass:"data"},[e("span",{staticClass:"btn btn-danger",on:{click:function(e){return t.openReplydlg(s)}}},[e("i",{staticClass:"fa fa-reply-all"}),t._v("回复")])]):t._e()]),2==s.state?e("div",{staticClass:"reply-area"},[e("div",{staticClass:"hd"},[e("div",{staticClass:"prop"},[t._v(" "+t._s(s.rpname)+" ")]),e("div",{staticClass:"prop"},[t._v(" "+t._s(s.replytime)+" ")])]),e("div",{staticClass:"bd"},[e("div",{staticClass:"img-area"},[e("img",{staticClass:"image",attrs:{src:t.hostHead+s.rpphoto}})]),e("div",{staticClass:"txt-area"},[t._v(" "+t._s(s.replycontent)+" ")])])]):t._e()])})),0),0==t.listLeaveword.length?e("div",{staticClass:"no-record-tip"},[t._m(0)]):t._e()]),e("el-dialog",{attrs:{title:"回复",visible:t.replyDlg},on:{"update:visible":function(e){t.replyDlg=e}}},[e("div",{staticClass:"strow"},[t._v(t._s(t.lw.dcontent))]),e("div",{staticClass:"stdrow"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replycontent,expression:"replycontent"}],staticClass:"lwta",attrs:{name:"replycontent",maxlength:"500",placeholder:"回复咨询"},domProps:{value:t.replycontent},on:{input:function(e){e.target.composing||(t.replycontent=e.target.value)}}})]),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.replyDlg=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.replyHandler}},[t._v("确 定")])],1)])],1)])},l=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("i",{staticClass:"el-icon-warning"}),t._v("没有留言记录")])}],i={name:"mymessage",data(){return{hostHead:this.$app.contextPath,listLeaveword:[],selectedAll:!1,id:1,replyDlg:!1,lw:{},replycontent:""}},created(){this.getLeaveword()},props:{accountInfo:{type:Object}},methods:{async getLeaveword(){let t="admin/leaveword/list",{data:e}=await this.$http.post(t,{targetid:"${sessionScope.huiyuan.id}"});e.data.forEach(t=>{t.rowSelected=!1}),this.listLeaveword=e.data},selectedAllHandler(){this.selectedAll=!this.selectedAll,null!=this.listLeaveword&&this.listLeaveword.forEach(t=>{t.rowSelected=this.selectedAll})},async deleteRc(){let t="admin/leaveword/delete";if(0==this.listLeaveword.length)return void alert("删毛线,没有记录");let e=this.listLeaveword.filter(t=>t.rowSelected).map(t=>t.id);if(e.length<=0)return void this.$message.error("删除毛线,先选择再删除");let{data:s}=await this.$http.post(t,{ids:e});null!=s&&s.stateCode<0?this.$message.error(s.des):this.getLeaveword()},openReplydlg(t){this.lw=t,this.replyDlg=!0},async replyHandler(){if(""==this.replycontent)return void alert("输入回复内容");let t="admin/leaveword/reply",e=await this.$http.post(t,{replycontent:this.replycontent,id:this.lw.id,replyren:"${sessionScope.huiyuan.name}"});e.data.stateCode>0&&(this.replycontent="",this.replyDlg=!1,this.$message.success("成功"),this.getLeaveword())}}},r=i,c=s("829d"),d=Object(c["a"])(r,a,l,!1,null,"addeffdc",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0ac05a.54a6a107.js.map