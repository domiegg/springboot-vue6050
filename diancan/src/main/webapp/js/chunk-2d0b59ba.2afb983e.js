(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b59ba"],{"1a2f":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;return s("div",[t._m(0),s("div",{staticStyle:{margin:"22px 30px"}},[s("el-steps",{attrs:{space:200,active:2,"finish-status":"success"}},[s("el-step",{attrs:{title:"下单"}}),s("el-step",{attrs:{title:"付款"}}),s("el-step",{attrs:{title:"派送"}}),s("el-step",{attrs:{title:"收货评价"}})],1)],1),s("div",{staticClass:"shaddr-wrap"},[t._m(1),null!=t.receaddress?s("div",{staticClass:"bd"},[s("div",{staticClass:"contact"},[t._v(" "+t._s(t.receaddress.mobile)+" "+t._s(t.receaddress.shr)+" ")]),s("div",{staticClass:"addinfo"},[t._v(t._s(t.receaddress.addinfo)+" "),s("span",[t._v(t._s(t.receaddress.postcode))])])]):t._e()]),s("table",{staticClass:"smart-table",attrs:{border:"1"}},[s("tr",[s("td",{staticClass:"tlabel"},[t._v("订单编号")]),s("td",[t._v(t._s(t.order.ddno))]),s("td",{staticClass:"tlabel"},[t._v("下单时间:")]),s("td",[t._v(" "+t._s(t.order.createtime)+" ")])]),s("tr",[s("td",{staticClass:"tlabel"},[t._v("下单人")]),s("td",{attrs:{colspan:"3"}},[t._v(t._s(t.order.puraccount)+"("+t._s(t.order.purname)+")")])])]),s("table",{staticClass:"ui-record-table",attrs:{width:"100%",border:"0",cellspacing:"0",cellpadding:"0"}},[t._m(2),s("tbody",t._l(t.order.orderDetail,(function(e){return s("tr",[s("td",{attrs:{width:"300px;"}},[s("div",{staticStyle:{display:"flex","flex-direction":"row",padding:"5px 20px"}},[s("img",{attrs:{width:"80",height:"80",src:t.hostHead+e.images[0]}}),s("div",{staticStyle:{"margin-left":"18px"}},[t._v(t._s(e.spname))])])]),s("td",[t._v(t._s(e.price)+"元")]),s("td",[t._v(t._s(e.count))]),s("td",[1==e.state?s("span",[t._v("待付款")]):t._e(),2==e.state?s("span",[t._v("已付款")]):t._e(),3==e.state?s("span",[t._v(" 外卖员:"+t._s(e.wlno)+" ")]):t._e(),4==e.state?s("span",[t._v("已完成")]):t._e()])])})),0)]),s("table",{staticClass:"smart-table",attrs:{border:"1"}},[s("tr",[s("td",{staticClass:"tlabel",attrs:{width:"10%"}},[t._v(" 订单总金额 ")]),s("td",{attrs:{width:"*"}},[t.order.totalfee!=t.order.originfee?s("div",[s("div",{staticClass:"o-price"},[t._v(" "+t._s(t.order.totalfee)+"元 ")])]):s("div",{staticClass:"o-price"},[t._v(" "+t._s(t.order.originfee)+"元 ")])])]),t.huiyuan.jifen>0?s("tr",[s("td",{staticClass:"tlabel",attrs:{width:"10%"}},[t._v(" 积分 ")]),s("td",{attrs:{width:"*"}},[s("div",{staticClass:"o-price"},[s("el-checkbox",{model:{value:t.useJifen,callback:function(s){t.useJifen=s},expression:"useJifen"}},[t._v("使用积分")]),t._v(" "+t._s(t.huiyuan.jifen)+"分 ")],1)])]):t._e(),s("tr",[s("td",{staticClass:"tlabel",attrs:{width:"10%"}},[t._v(" 账户余额 ")]),s("td",{attrs:{width:"*"}},[s("div",{staticClass:"o-price"},[t._v(" "+t._s(t.huiyuan.yue)+"¥ ")])])]),1==t.order.state?s("tr",[s("td",{staticClass:"tlabel",attrs:{width:"10%"}},[t._v(" 支付密码: ")]),s("td",{attrs:{width:"*"}},[s("div",{staticStyle:{width:"220px",display:"inline-block"}},[s("el-input",{attrs:{placeholder:"请输入支付密码","show-password":"",clearable:""},model:{value:t.paypwd,callback:function(s){t.paypwd=s},expression:"paypwd"}})],1)])]):t._e(),1==t.order.state?s("tr",[s("td",{attrs:{colspan:"4"}},[s("el-button",{attrs:{type:"danger"},on:{click:function(s){return t.payHandler(t.order.id)}}},[s("i",{staticClass:"el-icon-check"}),t._v("确定付款 ")])],1)]):t._e()])])},i=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"search-title"},[s("h2",[t._v("订单付款")]),s("div",{staticClass:"description"})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"logo"},[s("i",{staticClass:"fa fa-location-arrow"})])},function(){var t=this,s=t._self._c;return s("thead",[s("tr",[s("th",{attrs:{width:"300px"}},[t._v("名称")]),s("th",[t._v("价格")]),s("th",[t._v("数量")]),s("th",[t._v("状态")])])])}],r={name:"payment",data(){return{paypwd:"",hostHead:this.$app.contextPath,order:{},useJifen:!0,huiyuan:{},receaddress:null}},props:{params:{type:Object,default:{}}},methods:{async getOrderInfo(){let{data:t}=await this.$http.post("admin/shorder/load",{id:this.params.id});t.stateCode<0?this.$message.error(t.des):(console.log("订单数据",t),this.order=t.data)},async getHuiyuanInfo(){let{data:t}=await this.$http.post("admin/huiyuan/load",{id:this.order.purchaser});t.stateCode<0?this.$message.error(t.des):(this.huiyuan=t.data,console.log("huiyuan",this.huiyuan))},async getAddress(){console.log("order.id",this.order.addid);let{data:t}=await this.$http.post("admin/receaddress/load",{id:this.order.addid});t.stateCode<0?this.$message.error(t.des):(this.receaddress=t.data,console.log("receaddress",this.receaddress))},async payHandler(t){if(""==this.paypwd)return void this.$message.error("请输入支付密码");let{data:s}=await this.$http.post("admin/shorder/payment",{id:this.params.id,usejifen:this.useJifen,paypwd:this.paypwd});s.stateCode<0?this.$message.error(s.des):(this.$message.success("支付成功"),this.$emit("close",!1))}},async created(){await this.getOrderInfo(),await this.getAddress(),await this.getHuiyuanInfo()}},d=r,l=e("829d"),o=Object(l["a"])(d,a,i,!1,null,"85561008",null);s["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d0b59ba.2afb983e.js.map