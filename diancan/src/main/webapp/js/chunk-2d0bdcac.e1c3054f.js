(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bdcac"],{"2e03":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticStyle:{margin:"22px 30px"}},[s("el-steps",{attrs:{space:200,active:2,"finish-status":"success"}},[s("el-step",{attrs:{title:"下单"}}),s("el-step",{attrs:{title:"取消订单"}})],1)],1),s("div",{staticClass:"shaddr-wrap"},[t._m(0),null!=t.receaddress?s("div",{staticClass:"bd"},[s("div",{staticClass:"contact"},[t._v(" "+t._s(t.receaddress.mobile)+" "+t._s(t.receaddress.shr)+" ")]),s("div",{staticClass:"addinfo"},[t._v(t._s(t.receaddress.addinfo)+" "),s("span",[t._v(t._s(t.receaddress.postcode))])])]):t._e()]),s("table",{staticClass:"smart-table",attrs:{border:"1"}},[s("tr",[s("td",{staticClass:"tlabel"},[t._v("订单编号")]),s("td",[t._v(t._s(t.order.ddno))]),s("td",{staticClass:"tlabel"},[t._v("下单时间:")]),s("td",[t._v(" "+t._s(t.order.createtime)+" ")])])]),s("table",{staticClass:"ui-record-table",attrs:{width:"100%",border:"0",cellspacing:"0",cellpadding:"0"}},[t._m(1),s("tbody",[t._l(t.order.orderDetail,(function(e){return s("tr",[s("td",{attrs:{width:"300px;"}},[s("div",{staticStyle:{display:"flex","flex-direction":"row",padding:"5px 20px"}},[s("img",{attrs:{width:"80",height:"80",src:t.hostHead+e.images[0]}}),s("div",{staticStyle:{"margin-left":"18px"}},[t._v(t._s(e.spname))])])]),s("td",[t._v(t._s(e.price)+"元")]),s("td",[t._v(t._s(e.count))]),s("td",[1==e.state?s("span",[t._v("待付款")]):t._e(),2==e.state?s("span",[t._v("已付款")]):t._e(),3==e.state?s("span",[t._v(" 外卖员:"+t._s(e.wlno)+" ")]):t._e(),4==e.state?s("span",[t._v("已完成")]):t._e()])])})),s("tr",[s("td",{attrs:{colspan:"4"}},[t._v(" 总金额:"+t._s(t.order.totalfee)+"元 ")])]),1==t.order.state?s("tr",[s("td",{attrs:{colspan:"4"}},[s("el-button",{attrs:{type:"danger"},on:{click:function(s){return t.cancelHandler(t.order.id)}}},[s("i",{staticClass:"el-icon-check"}),t._v("取消 ")])],1)]):t._e()],2)])])},r=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"logo"},[s("i",{staticClass:"fa fa-location-arrow"})])},function(){var t=this,s=t._self._c;return s("thead",[s("tr",[s("th",{attrs:{width:"300px"}},[t._v("名称")]),s("th",[t._v("价格")]),s("th",[t._v("数量")]),s("th",[t._v("状态")])])])}],d={name:"cancelorder",data(){return{paypwd:"",hostHead:this.$app.contextPath,order:{},receaddress:{},huiyuan:null}},props:{params:{type:Object,default:{}}},methods:{async getOrderInfo(){let{data:t}=await this.$http.post("admin/shorder/load",{id:this.params.id});t.stateCode<0?this.$message.error(t.des):(console.log("订单数据",t),this.order=t.data)},async getHuiyuanInfo(){let{data:t}=await this.$http.post("admin/huiyuan/load",{id:this.order.purchaser});t.stateCode<0?this.$message.error(t.des):(this.huiyuan=t.data,console.log("huiyuan",this.huiyuan))},async getAddress(){let{data:t}=await this.$http.post("admin/receaddress/load",{id:this.order.addid});t.stateCode<0?this.$message.error(t.des):(this.receaddress=t.data,console.log("receaddress",this.receaddress))},async cancelHandler(t){if(!confirm("确定要关闭订单?"))return;let{data:s}=await this.$http.post("admin/shorder/cancel",{id:this.params.id});s.stateCode<0?this.$message.error(s.des):(this.$message.success("取消成功"),this.$emit("close",!1))}},async created(){await this.getOrderInfo(),await this.getHuiyuanInfo(),await this.getAddress()}},i=d,c=e("829d"),n=Object(c["a"])(i,a,r,!1,null,"2b535e8a",null);s["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d0bdcac.e1c3054f.js.map