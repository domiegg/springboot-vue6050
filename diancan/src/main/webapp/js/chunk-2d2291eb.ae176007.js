(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2291eb"],{dba8:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[e.over?t("div",{staticClass:"no-record-tip"},[e._m(1)]):t("div",{staticClass:"mypanel"},[e._m(0),t("div",{staticClass:"bd"},[t("table",{staticClass:"smart-table",attrs:{border:"1",cellspacing:"1",width:"100%"}},[t("tr",[t("td",{staticClass:"tlabel",attrs:{width:"10%",align:"right"}},[e._v("用户名:")]),t("td",{attrs:{width:"*"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.users.username,expression:"users.username"},{name:"validate",rawName:"v-validate",value:{required:!0,messages:{required:"请输入用户名"}},expression:"{required:true,messages:{required:'请输入用户名'}}"}],staticClass:"input-txt",attrs:{name:"username",placeholder:"用户名",type:"text"},domProps:{value:e.users.username},on:{input:function(t){t.target.composing||e.$set(e.users,"username",t.target.value)}}})]),t("td",{attrs:{colspan:"2",rowspan:"6"}},[t("dw-upload",{attrs:{"host-head":e.hostHead},model:{value:e.users.xiangpian,callback:function(t){e.$set(e.users,"xiangpian",t)},expression:"users.xiangpian"}})],1)]),t("tr",[t("td",{staticClass:"tlabel",attrs:{width:"10%",align:"right"}},[e._v("密码:")]),t("td",{attrs:{width:"*"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.users.password,expression:"users.password"},{name:"validate",rawName:"v-validate",value:{required:!0,messages:{required:"请输入密码"}},expression:"{required:true,messages:{required:'请输入密码'}}"}],staticClass:"input-txt",attrs:{name:"password",placeholder:"密码",type:"password"},domProps:{value:e.users.password},on:{input:function(t){t.target.composing||e.$set(e.users,"password",t.target.value)}}})])]),t("tr",[t("td",{staticClass:"tlabel",attrs:{align:"right"}},[e._v("角色:")]),t("td",[t("my-select",{attrs:{name:"roleid",url:e.hostHead+"/admin/sysrole/list?ispaged=-1"},model:{value:e.users.roleid,callback:function(t){e.$set(e.users,"roleid",t)},expression:"users.roleid"}})],1)]),t("tr",[t("td",{staticClass:"tlabel",attrs:{width:"10%",align:"right"}},[e._v("姓名:")]),t("td",{attrs:{width:"*"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.users.realname,expression:"users.realname"},{name:"validate",rawName:"v-validate",value:{required:!0,messages:{required:"请输入姓名"}},expression:"{required:true,messages:{required:'请输入姓名'}}"}],staticClass:"input-txt",attrs:{name:"realname",placeholder:"姓名",type:"text"},domProps:{value:e.users.realname},on:{input:function(t){t.target.composing||e.$set(e.users,"realname",t.target.value)}}})])]),t("tr",[t("td",{staticClass:"tlabel",attrs:{align:"right"}},[e._v("性别:")]),t("td",{attrs:{width:"*"}},[t("el-radio-group",{model:{value:e.users.sex,callback:function(t){e.$set(e.users,"sex",t)},expression:"users.sex"}},[t("el-radio",{attrs:{label:"男"}}),t("el-radio",{attrs:{label:"女"}})],1)],1)]),t("tr",[t("td",{staticClass:"tlabel",attrs:{align:"right"}},[e._v("电话:")]),t("td",{attrs:{width:"*"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.users.tel,expression:"users.tel"},{name:"validate",rawName:"v-validate",value:{required:!0,messages:{required:"请输入电话"}},expression:"{required:true,messages:{required:'请输入电话'}}"}],staticClass:"input-txt",attrs:{name:"tel",placeholder:"电话",type:"text"},domProps:{value:e.users.tel},on:{input:function(t){t.target.composing||e.$set(e.users,"tel",t.target.value)}}})])]),t("tr",[t("td",{staticClass:"tlabel",attrs:{align:"right"}},[e._v("昵称:")]),t("td",{attrs:{width:"*"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.users.nickname,expression:"users.nickname"},{name:"validate",rawName:"v-validate",value:{required:!0,messages:{required:"请输入昵称"}},expression:"{required:true,messages:{required:'请输入昵称'}}"}],staticClass:"input-txt",attrs:{name:"nickname",placeholder:"昵称",type:"text"},domProps:{value:e.users.nickname},on:{input:function(t){t.target.composing||e.$set(e.users,"nickname",t.target.value)}}})]),t("td",{staticClass:"tlabel",attrs:{align:"right"}},[e._v("邮箱:")]),t("td",{attrs:{width:"*"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.users.email,expression:"users.email"},{name:"validate",rawName:"v-validate",value:{required:!0,messages:{required:"请输入邮箱"}},expression:"{required:true,messages:{required:'请输入邮箱'}}"}],staticClass:"input-txt",attrs:{name:"email",placeholder:"邮箱",type:"text"},domProps:{value:e.users.email},on:{input:function(t){t.target.composing||e.$set(e.users,"email",t.target.value)}}})])]),t("tr",[t("td",{attrs:{colspan:"4"}},[t("el-button",{attrs:{icon:"el-icon-check",type:"danger"},on:{click:e.submitHandler}},[e._v("提交")])],1)])])])])])},r=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"hd"},[t("div",{staticClass:"title"},[e._v("新增用户")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("i",{staticClass:"el-icon-check"}),e._v(" 成功 ")])}],i={name:"usersadd",data(){return{dangerinput:!1,pageTitle:"新增用户信息",errors:{},over:!1,hostHead:this.$app.contextPath,actiontype:"save",users:{username:"",password:"",sex:"男",tel:"",roleid:1,realname:"",nickname:"",email:"",creator:"${sessionScope.users.username}",xiangpian:"/upload/nopic.jpg"}}},created(){this.load()},props:{accountInfo:{type:Object}},methods:{uploaded(e,t){console.log("上传成功",e.data),null!=e.data&&e.data.length>0&&(this.users.xiangpian=e.data[0].relativeUrl)},submitHandler(){console.log("modelname=",this.users.roleid),"save"===this.actiontype&&this.doSubmit({url:"/admin/users/save",actionTip:"新增用户成功"}),"update"===this.actiontype&&this.doSubmit({url:"/admin/users/update",actionTip:"更新用户成功"})},async doSubmit(e){let t={url:"/admin/users/add",actionTip:"新增用户成功"};Object.assign(t,e);let s={...this.users};console.log("params=",s);const a=this.myValidator.valid(this);if(!a)return;let{data:r}=await this.$http.post(t.url,s);r.stateCode<=0?this.$alert("提交异常","系统提示",{confirmButtonText:"确定"}):(this.$message({message:t.actionTip,type:"success",duration:3e3}),this.over=!0)},preupload(e){const t="image/jpeg"===e.type,s=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&s},async load(){let e=this.$route.query.id;if(null!=e){this.actiontype="update",this.pageTitle="编辑用户信息";let t="/admin/users/load",{data:s}=await this.$http.post(t,{id:e});console.log("res",s),null!=s&&null!=s.data&&(this.users=s.data)}}}},l=i,n=s("829d"),d=Object(n["a"])(l,a,r,!1,null,"47b260db",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d2291eb.ae176007.js.map