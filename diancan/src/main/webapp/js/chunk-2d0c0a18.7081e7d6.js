(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c0a18"],{4336:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticStyle:{margin:"22px 30px"}},[s("el-steps",{attrs:{space:200,active:4,"finish-status":"success"}},[s("el-step",{attrs:{title:"下单"}}),s("el-step",{attrs:{title:"付款"}}),s("el-step",{attrs:{title:"派送"}}),s("el-step",{attrs:{title:"收货评价"}})],1)],1),s("div",{staticClass:"shaddr-wrap"},[t._m(0),null!=t.receaddress?s("div",{staticClass:"bd"},[s("div",{staticClass:"contact"},[t._v(" "+t._s(t.receaddress.mobile)+" "+t._s(t.receaddress.shr)+" ")]),s("div",{staticClass:"addinfo"},[t._v(t._s(t.receaddress.addinfo)+" "),s("span",[t._v(t._s(t.receaddress.postcode))])])]):t._e()]),t._l(t.order.orderDetail,(function(e){return s("table",{staticClass:"smart-table",attrs:{border:"1"}},[s("tr",[s("td",{staticClass:"tlabel"},[t._v("订单编号")]),s("td",[t._v(t._s(t.order.ddno))]),s("td",{staticClass:"tlabel"},[t._v("下单时间:")]),s("td",[t._v(" "+t._s(t.order.createtime)+" ")])]),s("tr",[s("td",{staticClass:"tlabel"},[t._v("商品")]),s("td",{attrs:{colspan:"3"}},[s("img",{attrs:{width:"80",height:"80",src:t.hostHead+e.images[0]}}),t._v(" "+t._s(e.spname)+" "+t._s(e.price)+"¥X"+t._s(e.count)+" ")])]),s("tr",[s("td",{staticClass:"tlabel"},[t._v("评价:")]),s("td",{attrs:{colspan:"3"}},[s("el-rate",{model:{value:t.star,callback:function(s){t.star=s},expression:"star"}})],1)]),s("tr",[s("td",{staticClass:"tlabel"},[t._v("描述")]),s("td",{attrs:{colspan:"3"}},[3==e.state?s("div",{staticStyle:{width:"300px"}},[s("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容",clearable:""},model:{value:t.des,callback:function(s){t.des=s},expression:"des"}})],1):t._e(),4==e.state?s("div",[t._v(" "+t._s(e.comment.des)+" ")]):t._e()])]),3==e.state?s("tr",[s("td",{attrs:{colspan:"4"}},[s("el-button",{attrs:{type:"danger"},on:{click:t.pingjiaHandler}},[s("i",{staticClass:"el-icon-circle-plus"}),t._v("收货评价")])],1)]):t._e()])}))],2)},r=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"logo"},[s("i",{staticClass:"fa fa-location-arrow"})])}],i={name:"shouhuo",data(){return{paypwd:"",hostHead:this.$app.contextPath,order:{},star:0,des:"",receaddress:{},huiyuan:null}},props:{params:{type:Object,default:{}}},methods:{async getOrderInfo(){let{data:t}=await this.$http.post("admin/shorder/load",{id:this.params.id});t.stateCode<0?this.$message.error(t.des):(t.data.orderDetail=t.data.orderDetail.filter(t=>t.id==this.params.oiid),console.log("订单数据",t),this.order=t.data)},async getHuiyuanInfo(){let{data:t}=await this.$http.post("admin/huiyuan/load",{id:this.order.purchaser});t.stateCode<0?this.$message.error(t.des):(this.huiyuan=t.data,console.log("huiyuan",this.huiyuan))},async getAddress(){let{data:t}=await this.$http.post("admin/receaddress/load",{id:this.order.addid});t.stateCode<0?this.$message.error(t.des):(this.receaddress=t.data,console.log("receaddress",this.receaddress))},async pingjiaHandler(){if(0==this.star)return void this.$message.error("请选择评价等级");if(""==this.des)return void this.$message.error("请填写评论");let{data:t}=await this.$http.post("admin/shorder/shouhuo",{oiid:this.params.oiid,star:this.star,des:this.des,appraiserid:this.huiyuan.id});t.stateCode<0?this.$message.error(t.des):(this.$message.success("评论完成"),this.$emit("close",!1))}},async created(){await this.getOrderInfo(),await this.getHuiyuanInfo(),await this.getAddress()}},d=i,o=e("2877"),l=Object(o["a"])(d,a,r,!1,null,"2b3de2ee",null);s["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0c0a18.7081e7d6.js.map