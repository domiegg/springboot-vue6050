(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a3eb9"],{"03dd":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[e("shead",{attrs:{headid:t.$route.query.headid}}),e("div",{staticClass:"wrap round-block"},[e("el-steps",{attrs:{space:200,active:1,"finish-status":"success"}},[e("el-step",{attrs:{title:"加入购物车"}}),e("el-step",{attrs:{title:"填写收货地址"}}),e("el-step",{attrs:{title:"付款"}})],1),t.cartItems.length>0?e("div",{staticClass:"shopcart-box"},[e("div",{staticClass:"hd"},[t._v("购物车")]),e("div",{staticClass:"bd"},[e("table",{staticClass:"table table-striped table-hover table-bordered"},[t._m(0),e("tbody",t._l(t.cartItems,(function(a){return e("tr",{key:a.id},[e("td",[e("el-checkbox",{model:{value:a.value.selected,callback:function(e){t.$set(a.value,"selected",e)},expression:"item.value.selected"}}),e("a",{attrs:{href:t.hostHead+"/e/shangpininfo.jsp?id="+a.id}},[e("img",{attrs:{width:"120",height:"120",src:t.hostHead+a.value.tupian}})])],1),e("td",[t._v(t._s(a.value.name))]),e("td",[e("el-input-number",{attrs:{min:1,max:10,label:"描述文字"},on:{change:function(e){return t.countChange(a.value)}},model:{value:a.value.count,callback:function(e){t.$set(a.value,"count",e)},expression:"item.value.count"}})],1),e("td",[t._v(t._s(a.value.price)+"¥")]),e("td",[t._v(t._s(a.value.count*a.value.price)+"¥")]),e("td",[e("span",{staticClass:"btn btn-danger",on:{click:function(e){return t.removeHandler(a.id)}}},[e("i",{staticClass:"fa fa-trash"}),t._v("删除")])])])})),0)]),e("div",{staticClass:"cart-tool"},[e("el-checkbox",{on:{change:t.selectedAllHandler},model:{value:t.selectedAll,callback:function(e){t.selectedAll=e},expression:"selectedAll"}},[t._v("全选")]),e("div",{staticClass:"pull-right"},[t._v(" 已选 商品 "),e("span",[t._v(t._s(t.selectedCount))]),t._v(" 件 合计"+t._s(t.totalPrice)+"¥ "),e("el-button-group",[e("el-button",{attrs:{type:"danger",icon:"el-icon-check"},on:{click:t.doOrderHandler}},[t._v("提交订单")]),e("router-link",{staticClass:"el-button el-button--success",attrs:{to:"/e/index"}},[e("i",{staticClass:"fa fa-arrow-circle-o-left"}),t._v("继续购物")])],1)],1)],1)])]):e("div",{staticClass:"no-record-tip"},[e("div",{staticClass:"content"},[e("i",{staticClass:"fa fa-shopping-cart",staticStyle:{color:"red","font-size":"72px"}}),e("router-link",{attrs:{to:"/e/index"}},[t._v("继续逛逛")])],1)])],1),e("bottom"),e("loginmodal",{attrs:{show:t.openLogin},on:{"update:show":function(e){t.openLogin=e}}})],1)},l=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("全选")]),e("th",[t._v("商品")]),e("th",[t._v("数量")]),e("th",[t._v("单价(元)")]),e("th",[t._v("金额(元)")]),e("th",[t._v("操作")])])])}],n=(a("e937"),a("3869")),i=(a("f9e3"),a("f558")),c=a("4a62"),r={name:"shopcart",data(){return{cartItems:[],hostHead:this.$app.contextPath,selectedAll:!0,openLogin:!1}},methods:{selectedAllHandler(){null!=this.cartItems&&0!=this.cartItems.length&&(console.log("执行全选"),this.cartItems.forEach(t=>{t.value.selected=this.selectedAll}))},isLogin(){return this.$app.mycas.isLogin(this.$app.mycas.huiyuan_key)},countChange(t){console.log("item=",t);let e=new SmartStorage;e.update(t.id,t)},removeHandler(t){let e=new SmartStorage;e.remove(t),this.load()},load(){let t=new SmartStorage;this.cartItems=t.getItems(),console.log("this.cartItems=",this.cartItems)},doOrderHandler(){this.isLogin()?this.$router.push("/e/xiadan"):this.openLogin=!0}},computed:{totalPrice(){if(null==this.cartItems||0==this.cartItems.length)return 0;let t=0;return this.cartItems.forEach(e=>{e.value.selected&&(t+=e.value.count*e.value.price)}),t},selectedCount(){if(null==this.cartItems||0==this.cartItems.length)return 0;let t=0;return this.cartItems.forEach(e=>{e.value.selected&&t++}),t},huiyuan(){return this.$app.mycas.getAccount(this.$app.mycas.huiyuan_key)}},watch:{cartItems:{handler(){let t=new SmartStorage;this.cartItems.forEach(e=>{t.update(e.id,e.value)})},immediate:!1,deep:!0}},components:{Bottom:n["default"],Shead:i["default"],loginmodal:c["default"]},created(){this.load()}},o=r,d=a("2877"),u=Object(d["a"])(o,s,l,!1,null,"7e3beb69",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0a3eb9.a2636fb0.js.map